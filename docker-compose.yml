version: '3.1'

services:
    web:
        build: .
        ports:
            - "8080:8080"
        volumes:
            - .:/tmp
        environment:
            DB_HOST: db
            DB_USER: boost
            DB_PASSWORD: aaaaaa
            DB_NAME: boost
            DB_PORT: 5432
            TMP_FOLDER: /tmp/Boost
            PERSISTENT_FOLDER: /home/Boost
        depends_on:
            - "db"
        command: ["./wait-for-it.sh", "db:5432", "--", "./boost", "serve", "--hostname", "0.0.0.0", "--port", "8080"]
    db:
        image: postgres
        restart: always
        environment:
            POSTGRES_USER: boost
            POSTGRES_PASSWORD: aaaaaa
            POSTGRES_DB: boost
    adminer:
        image: adminer
        restart: always
        ports:
            - 8081:8080
        depends_on:
            - "db"
